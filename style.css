/* Base Styles */
:root {
    --win95-gray: #C0C0C0;
    --win95-dark-gray: #808080;
    --win95-white: #FFFFFF;
    --win95-black: #000000;
    --win95-blue: #000080;
    --win95-inactive-title-dark: #7F7F7F; /* Darker part of inactive title gradient */
    --win95-inactive-title-light: #C0C0C0; /* Lighter part for inactive */
    --win95-button-face: var(--win95-gray);
    --win95-button-shadow: var(--win95-dark-gray);
    --win95-button-highlight: var(--win95-white);
    --win95-button-text: var(--win95-black);
    --icon-grid-size: 80px;
}

body {
    margin: 0; padding: 0; background: #008080;
    font-family: "Tahoma", "MS Sans Serif", "Arial", sans-serif;
    font-size: 12px; user-select: none; overflow: hidden; color: var(--win95-black);
}

.desktop {
    position: relative; width: 100vw; height: 100vh; overflow: hidden;
    /* background: url("Photos/your_wedding_bg.jpg") no-repeat center center; */
    /* background-size: cover; */
}

/* --- Standard Win95 Borders --- */
.button-border-raised {
    border-style: solid; border-width: 1px;
    border-top-color: var(--win95-button-highlight); border-left-color: var(--win95-button-highlight);
    border-right-color: var(--win95-button-shadow); border-bottom-color: var(--win95-button-shadow);
    box-shadow: inset 1px 1px 0 0 var(--win95-button-face), 1px 1px 0 0 var(--win95-black);
}
.button-border-lowered {
    border-style: solid; border-width: 1px;
    border-top-color: var(--win95-button-shadow); border-left-color: var(--win95-button-shadow);
    border-right-color: var(--win95-button-highlight); border-bottom-color: var(--win95-button-highlight);
    box-shadow: inset 1px 1px 0 0 #A0A0A0;
}
.window-outer-border { /* For general window frames, applied by JS or on .window */
    border: 1px solid var(--win95-button-highlight);
    border-right-color: var(--win95-dark-gray);
    border-bottom-color: var(--win95-dark-gray);
    box-shadow: 1px 1px 0 0 var(--win95-dark-gray), inset 1px 1px 0 0 var(--win95-gray);
}
.content-border-sunken {
     border: 1px solid var(--win95-dark-gray);
     border-right-color: var(--win95-white);
     border-bottom-color: var(--win95-white);
     box-shadow: inset 1px 1px 0 0 #A0A0A0;
}

/* Desktop Icons */
.icon {
    width: var(--icon-grid-size); padding: 5px 0; text-align: center;
    color: white; cursor: pointer; position: absolute; display: flex;
    flex-direction: column; align-items: center; font-size: 11px;
    text-shadow: 1px 1px 1px var(--win95-black); box-sizing: border-box;
}
.icon .icon-img { width: 32px; height: 32px; margin-bottom: 4px; image-rendering: pixelated; }
.icon div {
    background-color: transparent; padding: 1px 3px; word-wrap: break-word;
    max-width: calc(var(--icon-grid-size) - 6px); line-height: 1.2;
}
.icon.selected div {
    background-color: var(--win95-blue); color: white;
    outline: 1px dotted var(--win95-white); text-shadow: none;
}

/* Initial Icon Positions */
#invitation-icon { top: 0;   left: 0; } #outlook-icon { top: 0; left: var(--icon-grid-size); }
#recycle-icon { top: 0; left: calc(2 * var(--icon-grid-size)); } #mycomputer-icon { top: 0; left: calc(3 * var(--icon-grid-size)); }
#picture1-icon { top: var(--icon-grid-size); left: 0; } #picture2-icon { top: var(--icon-grid-size); left: var(--icon-grid-size); }
#folder-icon { top: var(--icon-grid-size); left: calc(2 * var(--icon-grid-size)); } #upload-icon { top: var(--icon-grid-size); left: calc(3 * var(--icon-grid-size)); }
#gallery-icon { top: calc(2 * var(--icon-grid-size)); left: 0; } #ie-icon { top: calc(2 * var(--icon-grid-size)); left: var(--icon-grid-size); }
#notepad-icon { top: calc(2 * var(--icon-grid-size)); left: calc(2 * var(--icon-grid-size)); }
#minesweeper-icon { top: calc(2 * var(--icon-grid-size)); left: calc(3 * var(--icon-grid-size)); }
#controlpanel-icon { top: 0; left: calc(4 * var(--icon-grid-size)); }


/* Taskbar */
.taskbar {
    position: absolute; bottom: 0; left: 0; right: 0; height: 30px;
    background: var(--win95-gray); border-top: 1px solid var(--win95-button-highlight);
    display: flex; align-items: stretch; padding: 2px; box-sizing: border-box; z-index: 10000;
}
.start-button {
    padding: 0px 8px; cursor: pointer; font-weight: bold; display: flex;
    align-items: center; margin-right: 4px; font-size: 12px; min-width: 60px;
    box-sizing: border-box; height: 100%; white-space: nowrap;
}
.start-button img { width: 18px; height: 18px; margin-right: 4px; image-rendering: pixelated; }
.start-button.active, .start-button:active { padding-top: 1px; padding-left: 9px; }
.start-button.active img, .start-button:active img { margin-top: 1px; margin-left: 1px; }

#window-buttons-container { flex-grow: 1; display: flex; align-items: stretch; overflow: hidden; padding: 0 2px; }
.window-button {
    border: 1px solid transparent; margin-right: 2px; padding: 2px 8px; cursor: pointer;
    font-family: inherit; font-size: 11px; min-width: 80px; max-width: 150px;
    overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: flex;
    align-items: center; justify-content: flex-start; box-sizing: border-box; height: 100%;
}
.window-button img { width: 16px; height: 16px; margin-right: 4px; image-rendering: pixelated; }
.window-button.active { font-weight: bold; }

.tray {
    margin-left: auto; display: flex; align-items: center; padding: 0 4px;
    border-left: 1px solid var(--win95-button-shadow); border-top: 1px solid var(--win95-button-highlight);
    box-shadow: inset 1px 1px 0 0 var(--win95-button-highlight), inset -1px 0 0 0 var(--win95-button-shadow);
    height: 100%; box-sizing: border-box;
}
.tray img { width: 16px; height: 16px; margin: 0 3px; image-rendering: pixelated; }
.sound-tray-icon { cursor: pointer; } /* Make sound icon clickable */
.clock { font-size: 11px; padding: 0 5px; }

/* Start Menu */
.start-menu {
    position: absolute; bottom: 32px; left: 2px; width: 200px;
    background: var(--win95-gray); z-index: 9999; display: none;
    flex-direction: row; padding: 1px;
    border-style: solid; border-width: 1px;
    border-top-color: var(--win95-button-highlight); border-left-color: var(--win95-button-highlight);
    border-right-color: var(--win95-button-shadow); border-bottom-color: var(--win95-button-shadow);
    box-shadow: 1px 1px 0 0 var(--win95-black);
}
.start-menu.active { display: flex; }
.start-menu-sidebar {
    width: 28px; background: var(--win95-blue); color: var(--win95-white);
    writing-mode: vertical-lr; transform: rotate(180deg); text-align: center;
    font-weight: bold; font-size: 18px; padding: 10px 0; display: flex;
    align-items: center; justify-content: center; text-transform: uppercase;
    letter-spacing: 1px; flex-shrink: 0;
}
.start-menu-sidebar span { display: block; padding-left: 2px; white-space: nowrap; }
.start-menu-items { flex: 1; background: var(--win95-gray); padding: 2px; overflow: hidden; }
.start-menu-items ul { list-style: none; margin: 0; padding: 0; }
.start-menu-items li {
    padding: 4px 8px 4px 30px; position: relative; white-space: nowrap;
    cursor: pointer; display: flex; align-items: center; font-size: 12px;
    min-height: 22px; box-sizing: border-box;
}
.start-menu-items li img {
    position: absolute; left: 6px; top: 50%; transform: translateY(-50%);
    width: 16px; height: 16px; image-rendering: pixelated;
}
.start-menu-items li span { flex-grow: 1; overflow: hidden; text-overflow: ellipsis; }
.start-menu-items li.has-submenu::after {
    content: 'â–º'; position: absolute; right: 8px; top: 50%;
    transform: translateY(-50%); font-size: 9px;
}
.start-menu-items li a { text-decoration: none; color: inherit; display: flex; align-items: center; width: 100%; height: 100%;}
.start-menu-items li:hover, .start-menu-items li a:hover { background-color: var(--win95-blue); color: white; }

.start-menu-items li ul { /* Submenu */
    display: none; position: absolute; left: 100%; top: -3px; /* Adjusted top */
    background: var(--win95-gray); z-index: 10001; /* Higher than start menu */
    min-width: 180px; padding: 1px;
    border-style: solid; border-width: 1px;
    border-top-color: var(--win95-button-highlight); border-left-color: var(--win95-button-highlight);
    border-right-color: var(--win95-button-shadow); border-bottom-color: var(--win95-button-shadow);
    box-shadow: 1px 1px 0 0 var(--win95-black);
}
.start-menu-items li.has-submenu:hover > ul { display: block; } /* Show submenu on hover */
.start-menu-items li ul li { padding-left: 30px; } /* Indent submenu items */
.start-menu-items li.separator { padding:0; min-height:0; margin:3px 2px; }
.start-menu-items li.separator hr {
    border: none; border-top: 1px solid var(--win95-button-shadow);
    border-bottom: 1px solid var(--win95-button-highlight); margin: 0;
}

/* Windows (Application Windows) */
.window {
    position: absolute; display: none; flex-direction: column;
    width: 500px; height: 400px; background: var(--win95-gray);
    box-shadow: 1px 1px 0px 1px var(--win95-button-highlight),
                2px 2px 0px 1px var(--win95-button-shadow),
                3px 3px 0px 1px var(--win95-black); /* More authentic sharp shadow */
    z-index: 50; overflow: hidden; min-width: 200px; min-height: 150px;
    border: 1px solid var(--win95-gray); /* Base for outer border effect */
}
.window.active .title-bar { background: linear-gradient(to right, var(--win95-blue), #A6CAF0); color: white; }
.window:not(.active) .title-bar { background: linear-gradient(to right, var(--win95-inactive-title-dark), var(--win95-inactive-title-light)); color: #DFDFDF; }
.window.maximized {
    left: 0 !important; top: 0 !important; width: 100vw !important; height: calc(100vh - 30px) !important;
    box-shadow: none; border: none;
}

.title-bar {
    padding: 3px 4px; cursor: grab; display: flex; justify-content: space-between;
    align-items: center; font-size: 12px; font-weight: bold; height: 20px;
    flex-shrink: 0; user-select: none;
}
.title-bar:active { cursor: grabbing; }
.title-bar-icon { width: 16px; height: 16px; margin-right: 4px; vertical-align: middle; image-rendering: pixelated;}
.title-bar span { flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding-left: 2px; }

.window-controls { display: flex; align-items: center; }
.window-controls button {
    background: var(--win95-gray); border-style: solid; border-width:1px; /* Use button-border classes */
    cursor: pointer; margin-left: 2px; padding: 0;
    width: 18px; height: 16px; font-size: 10px; /* Adjust based on chosen symbols */
    line-height: 14px; /* Center symbols */ text-align: center; font-weight: normal;
    color: var(--win95-black); display: flex; align-items: center; justify-content: center;
    box-sizing: border-box;
}
.window-controls button:active { padding-top: 1px; padding-left: 1px; }

.menu-bar {
    background: var(--win95-gray); padding: 1px 5px; display: flex; font-size: 12px;
    flex-shrink: 0; border-bottom: 1px solid var(--win95-button-shadow);
    box-shadow: 0 1px 0 0 var(--win95-button-highlight); height: 21px; align-items: center;
}
.menu-item { margin-right: 10px; cursor: pointer; position: relative; padding: 2px 6px; }
.menu-item u { text-decoration: underline; }
.menu-item:hover { background-color: var(--win95-blue); color: white; }
.dropdown-menu {
    display: none; position: absolute; background: var(--win95-gray); z-index: 2100;
    top: 100%; left: 0; min-width: 120px; padding: 1px;
    border-style: solid; border-width: 1px;
    border-top-color: var(--win95-button-highlight); border-left-color: var(--win95-button-highlight);
    border-right-color: var(--win95-button-shadow); border-bottom-color: var(--win95-button-shadow);
    box-shadow: 1px 1px 0 0 var(--win95-black);
}
.menu-item:hover .dropdown-menu { display: block; }
.dropdown-item { padding: 3px 10px 3px 25px; cursor: pointer; font-size: 12px; position: relative; white-space: nowrap; }
.dropdown-item:hover { background: var(--win95-blue); color: white; }

.content {
    padding: 10px; background: var(--win95-white); flex-grow: 1; overflow: auto;
    font-size: 12px; color: var(--win95-black); position: relative;
    border: 1px solid; border-top-color: var(--win95-button-shadow);
    border-left-color: var(--win95-button-shadow); border-right-color: var(--win95-button-highlight);
    border-bottom-color: var(--win95-button-highlight);
    margin: 2px;
}
.content.image-content {
    padding: 0; display: flex; justify-content: center; align-items: center;
    overflow: hidden; background: var(--win95-dark-gray); border: none; margin: 0;
}
.content.image-content img { max-width: 100%; max-height: 100%; object-fit: contain; }

/* Resizer elements */
.resizer { width:8px; height:8px; background:transparent; position:absolute; z-index:110; display:none; }
.resizer-n  { top:-4px; left:50%; transform:translateX(-50%); cursor:n-resize; height:8px; width:calc(100% - 10px); }
.resizer-ne { top:-4px; right:-4px; cursor:ne-resize; }
.resizer-e  { top:50%; right:-4px; transform:translateY(-50%); cursor:e-resize; width:8px; height:calc(100% - 10px); }
.resizer-se { bottom:-4px; right:-4px; cursor:se-resize; }
.resizer-s  { bottom:-4px; left:50%; transform:translateX(-50%); cursor:s-resize; height:8px; width:calc(100% - 10px); }
.resizer-sw { bottom:-4px; left:-4px; cursor:sw-resize; }
.resizer-w  { top:50%; left:-4px; transform:translateY(-50%); cursor:w-resize; width:8px; height:calc(100% - 10px); }
.resizer-nw { top:-4px; left:-4px; cursor:nw-resize; }

/* Email Window */
.email-container { display:flex; height:100%; padding:0; margin:-2px; border:none; }
.email-nav { width:160px; flex-shrink:0; border-right:1px solid var(--win95-button-shadow); background:var(--win95-gray); padding:5px; overflow-y:auto; box-sizing:border-box; }
.email-nav .folder { padding:4px 6px; cursor:pointer; border:1px solid transparent; margin-bottom:3px; display:flex; align-items:center; font-size:11px; white-space:nowrap; }
.email-nav .folder img { width:16px; height:16px; margin-right:6px; image-rendering:pixelated; }
.email-nav .folder.active { border:1px dotted var(--win95-black); background-color:#e0e0e0; }
.email-nav .folder:not(.active):hover { background:#d0d0d0; border:1px dashed var(--win95-dark-gray); }
.email-main { flex:1; display:flex; flex-direction:column; overflow:hidden; background:var(--win95-white); }
.email-list { padding:5px; height:40%; overflow-y:auto; flex-shrink:0; border-bottom:1px solid var(--win95-button-shadow); box-shadow:0 1px 0 0 var(--win95-button-highlight); }
.email-content { padding:0; flex:1; overflow-y:auto; }
.email-content > div { padding:10px; }
.email-content > div[style*="border-bottom"] { padding:5px 10px; border-bottom:1px solid #ccc; }
.email-item { padding:3px 5px; border-bottom:1px solid #eee; cursor:pointer; font-size:11px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.email-item.selected { background-color:var(--win95-blue); color:white; }
.email-item:not(.selected):hover { background-color:#f0f0f0; }

/* My Computer & Explorer Window */
.drive-container, .folder-grid { display:flex; gap:10px; padding:10px; flex-wrap:wrap; justify-content:flex-start; }
.drive, .folder-item { display:flex; flex-direction:column; align-items:center; text-align:center; width:70px; cursor:pointer; padding:5px; box-sizing:border-box; }
.drive img, .folder-item img { width:32px; height:32px; margin-bottom:5px; image-rendering:pixelated; }
.folder-item img { width:60px; height:60px; object-fit:cover; border:1px solid var(--win95-dark-gray); }
.drive div, .folder-item div { font-size:11px; word-wrap:break-word; width:100%; padding:1px 3px; line-height:1.2; }
.drive:hover div, .folder-item:hover div, .drive.selected div, .folder-item.selected div { background-color:var(--win95-blue); color:white; outline:1px dotted var(--win95-white); }
#explorer-content .folder-item { width: 80px; } /* Control panel items */
#explorer-content .folder-item img { width: 32px; height: 32px; border: none; }

/* Internet Explorer */
.ie-toolbar { padding:3px 5px; background:var(--win95-gray); display:flex; align-items:center; gap:5px; border-bottom:1px solid var(--win95-button-shadow); box-shadow:0 1px 0 0 var(--win95-button-highlight); flex-shrink:0; height:28px; box-sizing:border-box; }
.ie-toolbar label { font-size:11px; margin-right:3px; }
.ie-toolbar input[type="text"] { flex-grow:1; height:20px; } /* Uses general input styling */
.ie-toolbar button { height:20px; line-height:1; } /* Uses general button styling */
.ie-content { padding:0; overflow:hidden; flex-grow:1; border:1px solid var(--win95-white); border-top-color:var(--win95-dark-gray); border-left-color:var(--win95-dark-gray); box-shadow:inset 1px 1px 0 0 #A0A0A0; margin:2px; }
#ie-iframe { width:100%; height:100%; border:none; background-color:white; }
.ie-history { padding:2px 5px; background:var(--win95-gray); font-size:11px; display:flex; align-items:center; gap:5px; border-top:1px solid var(--win95-button-highlight); flex-shrink:0; height:24px; box-sizing:border-box; }
#ie-history-select { flex-grow:1; height:20px; } /* Uses general select styling */

/* Recycle Bin */
#recycle-bin-list { list-style:none; padding:0; margin:0; }
#recycle-bin-list li { display:flex; align-items:center; gap:8px; padding:4px 8px; font-size:11px; cursor:pointer; }
#recycle-bin-list li:hover, #recycle-bin-list li.selected { background-color:var(--win95-blue); color:white; }
#recycle-bin-list img { width:16px; height:16px; image-rendering:pixelated; }

/* Notepad */
.notepad-textarea {
    width: 100%;
    height: 100%;
    border: none;
    outline: none;
    padding: 5px;
    font-family: "Lucida Console", "Courier New", monospace; /* Monospaced font for notepad */
    font-size: 13px; /* Slightly larger for readability */
    resize: none; /* Disable browser textarea resize */
    box-sizing: border-box;
    background-color: var(--win95-white);
    color: var(--win95-black);
}

/* Screensaver */
.screensaver-content {
    background-color: var(--win95-black);
    color: var(--win95-white);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden; /* Keep flying objects contained */
    cursor: none; /* Hide cursor for screensaver */
}
.flying-object {
    position: absolute;
    font-size: 30px; /* Size of emojis/text */
    animation: fly 15s linear infinite;
    opacity: 0; /* Start invisible */
    will-change: transform, opacity; /* Performance hint */
}
.flying-object:nth-child(1) { animation-delay: 0s; left: 10%; top: 20%; }
.flying-object:nth-child(2) { animation-delay: -3s; left: 70%; top: 10%; font-size: 40px; }
.flying-object:nth-child(3) { animation-delay: -6s; left: 50%; top: 80%; }
.flying-object:nth-child(4) { animation-delay: -9s; left: 20%; top: 60%; font-size: 25px; }
.flying-object:nth-child(5) { animation-delay: -12s; left: 80%; top: 50%; }

@keyframes fly {
    0% { transform: translate(0, 0) rotate(0deg); opacity: 0.8; }
    25% { transform: translate(calc(20vw + 10px), calc(-30vh - 20px)) rotate(90deg); }
    50% { transform: translate(calc(-15vw - 5px), calc(25vh + 15px)) rotate(180deg); opacity: 1; }
    75% { transform: translate(calc(30vw + 20px), calc(-10vh - 5px)) rotate(270deg); }
    100% { transform: translate(0, 0) rotate(360deg); opacity: 0.8; }
}


/* Context Menu */
#context-menu {
    position: absolute; display: none; background-color: var(--win95-gray);
    min-width: 160px; z-index: 11000; padding: 1px;
    border-style: solid; border-width: 1px;
    border-top-color: var(--win95-button-highlight); border-left-color: var(--win95-button-highlight);
    border-right-color: var(--win95-button-shadow); border-bottom-color: var(--win95-button-shadow);
    box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}
.context-menu-item {
    padding: 3px 10px 3px 25px; cursor: pointer; font-size: 12px;
    position: relative; white-space: nowrap; color: var(--win95-black);
}
.context-menu-item:hover { background-color: var(--win95-blue); color: white; }
.context-menu-item.disabled { color: var(--win95-dark-gray); cursor: default; }
.context-menu-item.disabled:hover { background-color: var(--win95-gray); }
.context-menu-separator {
    height: 1px; background-color: var(--win95-button-shadow);
    border-bottom: 1px solid var(--win95-button-highlight); margin: 3px 2px;
}


/* --- General Button/Input Styling --- */
button:not([class*="window-button"]):not([class*="start-button"]):not([class*="window-controls"] button) {
    background: var(--win95-button-face); color: var(--win95-button-text);
    padding: 3px 12px; font-family: inherit; font-size: 12px; cursor: pointer;
    border-style: solid; border-width: 1px;
    border-top-color: var(--win95-button-highlight); border-left-color: var(--win95-button-highlight);
    border-right-color: var(--win95-button-shadow); border-bottom-color: var(--win95-button-shadow);
    box-shadow: inset 1px 1px 0 0 var(--win95-button-face), 1px 1px 0 0 var(--win95-black);
}
button:not([class*="window-button"]):not([class*="start-button"]):not([class*="window-controls"] button):active {
    border-top-color: var(--win95-button-shadow); border-left-color: var(--win95-button-shadow);
    border-right-color: var(--win95-button-highlight); border-bottom-color: var(--win95-button-highlight);
    box-shadow: inset 1px 1px 0 0 #A0A0A0;
    padding-top: 4px; padding-left: 13px; /* Text shift effect */
}

input[type="text"], input[type="password"], textarea:not(.notepad-textarea) { /* Exclude notepad textarea */
    padding: 3px 4px; font-family: inherit; font-size: 12px; box-sizing: border-box;
    border: 1px solid var(--win95-white); border-top-color: var(--win95-dark-gray);
    border-left-color: var(--win95-dark-gray); box-shadow: inset 1px 1px 0 0 #A0A0A0;
    background-color: var(--win95-white); color: var(--win95-black);
}
input[type="file"] { /* Basic styling for file input */
    padding: 2px;
}
select {
    padding: 3px 4px; font-family: inherit; font-size: 12px; box-sizing: border-box;
    border: 1px solid var(--win95-white); border-top-color: var(--win95-dark-gray);
    border-left-color: var(--win95-dark-gray); box-shadow: inset 1px 1px 0 0 #A0A0A0;
    background-color: var(--win95-white); color: var(--win95-black);
    appearance: none;
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2212%22%20height%3D%228%22%20viewBox%3D%220%200%2012%208%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M1%201.5L6%206.5L11%201.5%22%20stroke%3D%22black%22%20stroke-width%3D%222%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat; background-position: right 5px center; padding-right: 20px;
}
input[type="range"] { /* Basic range slider styling */
    appearance: none;
    width: 100%;
    height: 15px;
    background: var(--win95-dark-gray);
    outline: none;
    border: 1px solid var(--win95-black);
}
input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    width: 15px;
    height: 15px;
    background: var(--win95-gray);
    cursor: pointer;
    border: 1px solid;
    border-top-color: var(--win95-button-highlight); border-left-color: var(--win95-button-highlight);
    border-right-color: var(--win95-button-shadow); border-bottom-color: var(--win95-button-shadow);
}
input[type="range"]::-moz-range-thumb {
    width: 13px; /* Moz needs explicit size without border */
    height: 13px;
    background: var(--win95-gray);
    cursor: pointer;
    border: 1px solid;
    border-top-color: var(--win95-button-highlight); border-left-color: var(--win95-button-highlight);
    border-right-color: var(--win95-button-shadow); border-bottom-color: var(--win95-button-shadow);
}
input[type="checkbox"] { /* Basic checkbox styling */
    appearance: none;
    width: 13px;
    height: 13px;
    background: var(--win95-white);
    border: 1px solid var(--win95-dark-gray);
    border-right-color: var(--win95-white);
    border-bottom-color: var(--win95-white);
    box-shadow: inset 1px 1px 0 0 #A0A0A0;
    position: relative; /* For checkmark positioning */
    vertical-align: middle;
    margin-right: 4px;
}
input[type="checkbox"]:checked::after {
    content: 'âœ“'; /* Checkmark */
    position: absolute;
    top: -3px; /* Adjust for checkmark alignment */
    left: 1px;
    font-size: 12px;
    color: var(--win95-black);
}


/* --- Mobile Responsiveness --- */
@media (max-width: 768px) {
    body { font-size:14px; overflow:auto; }
    .desktop { height:auto; min-height:100vh; display:flex; flex-direction:column; padding-bottom:50px; }
    .icon-container { display:flex; flex-wrap:wrap; padding:15px; gap:15px; justify-content:flex-start; order:1; }
    .icon {
        position:static; width:80px; height:auto; padding:8px; color:var(--win95-black);
        background:#E0E0E0; border:1px solid var(--win95-dark-gray); border-radius:5px;
        text-shadow:none; margin:0;
    }
    .icon .icon-img { width:36px; height:36px; }
    .icon div { font-size:11px; margin-top:4px; max-width:100%; }
    .icon.selected div { background-color:var(--win95-blue); color:white; outline:none; }

    .taskbar { position:fixed; height:45px; order:0; padding:3px; }
    .start-button { min-width:70px; font-size:14px; }
    .start-button img { width:22px; height:22px; }
    #window-buttons-container { display:none; }
    .tray { padding:0 6px; } .tray img { width:20px; height:20px; } .clock { font-size:13px; }

    .start-menu { width:80vw; max-width:300px; bottom:48px; left:5px; font-size:14px; }
    .start-menu-sidebar { width:30px; font-size:20px; }
    .start-menu-items li { padding:6px 8px 6px 35px; font-size:14px; min-height:28px; }
    .start-menu-items li img { width:20px; height:20px; left:8px; }
    .start-menu-items li.has-submenu::after { right:10px; }
    .start-menu-items li ul { left:10%; top:10%; width:80%; z-index:10002; /* Higher than menu itself */ border:2px solid black; box-shadow:3px 3px 5px rgba(0,0,0,0.5); }

    .window {
        position:fixed !important; /* Override JS inline styles for position */
        left:0 !important; top:0 !important; width:100vw !important; height:100vh !important;
        z-index:5000; box-shadow:none; border:none; background:var(--win95-gray);
    }
    .window.active { display:flex; }
    .maximize-button { display:none; }

    .title-bar { height:40px; font-size:16px; padding:5px 10px; }
    .title-bar-icon { width:22px; height:22px; }
    .window-controls button { width:30px; height:28px; font-size:16px; line-height:26px; }

    .menu-bar { height:35px; font-size:14px; padding:2px 10px; }
    .menu-item { padding:5px 10px; }
    .dropdown-menu { width:180px; font-size:14px; }
    .dropdown-item { padding:6px 12px 6px 30px; }

    .content { padding:15px; font-size:14px; margin:0; border:none; }
    .email-container { flex-direction:column; height:calc(100% - 40px - 35px); }
    .email-nav { width:100%; height:auto; border-right:none; border-bottom:1px solid var(--win95-button-shadow); flex-shrink:0; display:flex; flex-wrap:wrap; gap:5px; padding:8px; }
    .email-nav .folder { margin-bottom:0; padding:6px 8px; flex-grow:1; text-align:center; }
    .email-main { flex-grow:1; height:auto; }
    .email-list { height:35%; }

    .folder-grid { justify-content:space-around; }
    .folder-item { width:100px; } .folder-item img { width:80px; height:80px; }

    .ie-toolbar { flex-wrap:wrap; height:auto; padding:8px; }
    .ie-toolbar input[type="text"] { margin-top:5px; width:calc(100% - 80px); height:28px; }
    .ie-toolbar button { height:28px; }
    .ie-content { margin:5px; }
    .ie-history { flex-wrap:wrap; height:auto; padding:8px; }
    #ie-history-select { margin-top:5px; width:100%; height:28px; }

    .resizer { display:none !important; }
    #context-menu { display:none !important; }
    .screensaver-content { cursor: default; } /* Show cursor on mobile for screensaver */
}

/* Gallery specific styling */
.gallery-item { /* Used by JS for NAS gallery */
    /* Inherits from .button-border-raised if class is added by JS */
    /* display: flex; flex-direction: column; align-items: center; */
    /* background-color: var(--win95-gray); */
}